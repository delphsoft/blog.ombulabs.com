<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    

    <title>Ombulabs Blog - The Lean Software Boutique - Home</title>

    
    <meta name="description" content="OmbuLabs Blog, The Lean Software Boutique's blog" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Ombulabs Blog - The Lean Software Boutique - Home">
    <meta itemprop="description" content="OmbuLabs Blog, The Lean Software Boutique's blog">
    <!-- meta itemprop="image" content="http://www.example.com/image.jpg" -->

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@OmbuLabs">
    <meta name="twitter:title" content="Ombulabs Blog - The Lean Software Boutique - Home">
    <meta name="twitter:description" content="OmbuLabs Blog, The Lean Software Boutique's blog">
    <meta name="twitter:creator" content="@OmbuLabs">
    <!-- Twitter summary card with large image must be at least 280x150px -->
    <!-- meta name="twitter:image:src" content="http://www.example.com/image.html" -->

    <!-- Open Graph data -->
    <meta property="og:title" content="Ombulabs Blog - The Lean Software Boutique - Home" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://www.ombulabs.com/index.html" />
    <meta property="og:image" content="http://www.ombulabs.com/assets/isotype.png" />
    <meta property="og:description" content="OmbuLabs Blog, The Lean Software Boutique's blog" />
    <meta property="og:site_name" content="Ombulabs Blog - The Lean Software Boutique - Home" />
    <meta property="article:published_time" content="" />
    <meta property="article:modified_time" content="" />
    <meta property="article:section" content="OmbuLabs Blog, The Lean Software Boutique's blog" />
    <meta property="article:tag" content="Ombulabs Blog - The Lean Software Boutique - Home" />
    <meta property="fb:admins" content="10153304864537860" />

    <link rel="stylesheet" type="text/css" href="/blog/assets/css/screen.css" />
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,900,300italic,400italic,700italic|Maven+Pro" rel="stylesheet" type="text/css">
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/blog/assets/css/main.css" />
    <link rel="stylesheet" type="text/css" href="/assets/ombulabs_blog.css" />
</head>
<body class="home-template">
  <header class="main-header no-cover">
      <nav class="main-nav overlay clearfix">
              
              <a class="back-button icon-arrow-left"
                 href="http://www.ombulabs.com">Home</a>
          <a class="subscribe-button icon-feed" href="/blog/rss.xml">Subscribe</a>
      </nav>
      <div class="vertical">
          <div class="main-header-content inner">
              <h1 class="page-title logo"><a href="/blog">Ombulabs Blog</a></h1>
              <h2 class="page-description slogan">
                   The Lean Software Boutique 
                   <a href='http://www.ombulabs.com'> About us </a> 
              </h2>
          </div>
      </div>
      <a class="scroll-down icon-arrow-left" href="#content" data-offset="-45"><span class="hidden">Scroll Down</span></a>
  </header>

    <main id="content" class="content" role="main">


    <div class="extra-pagination inner">
        <nav class="pagination" role="pagination">
    
    <span class="page-number"> Page 1 of 1 </span>
     
</nav>
    </div>

    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/software-development/time-and-material.html">Time and Material</a></h2>
    </header>
    <section class="post-excerpt">
        <p>As of 2016, we will no longer work with clients on fixed bid projects. They are not a good fit for us and we are not a good fit for them.</p>

<p>All of our clients are startups. Fixed bids are counterproductive for startups. They give the client a false sense of security and they punish changing requirements.</p>

<p>Fixed bids make clients think that their project will be finished in a fixed period of time if their requirements don&#39;t change while developing the project. That is a big <strong>if</strong>!</p>
 <a class="read-more" href="/blog/software-development/time-and-material.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/9299203e7e9b9ae35e39eb66f3155f15?s=50" alt="Ernesto Tagwerker" nopin="nopin" />
  
  <a href="/blog/authors/etagwerker"
     title="Articles by Ernesto Tagwerker">
     Ernesto Tagwerker
  </a>


 
  on
    
      <a href="/blog/tags/software-development"
         title="Articles about Software-Development">Software-Development</a>



<time class="post-date" datetime="2015-11-19">
  19 Nov 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/security/almundo-bill-vulnerability.html">Almundo's Bill Vulnerability</a></h2>
    </header>
    <section class="post-excerpt">
        <p>The other day my friend <a href="https://twitter.com/juanchorossi">Juan Rossi</a> reported a vulnerability in the <a href="http://almundo.com/">Almundo</a> billing system. Since then, the vulnerability has been fixed by <a href="http://superfactura.com.ar/">Superfactura</a>, their billing software provider.</p>

<p>Almundo is one of the <a href="http://www.alexa.com/siteinfo/almundo.com.ar">biggest travel agencies in Argentina</a>. Their site is among the 250 most visited websites in the country.</p>

<p>The vulnerability allowed anyone to download billing information about their clients by creating a pretty simple <code>HTTP GET</code> request. No programming knowledge required.</p>

<p>Basically, if you had bought anything from Almundo, you would have received an email with a link to your bill. Something like this:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">http://asatej.superfactura.com.ar/un_comprobante_pdf.php?s=1&amp;f=73455&amp;tc=F13&amp;tf=B
</code></pre></div>

<p>At plain sight, you can see the type of bill (<em>Factura B</em>) and the number of bill (<em>Factura #73455</em>)</p>

<p>By entering this URL, you could see sensitive information about the client and what they had bought:</p>

<ul>
<li>Client&#39;s full name</li>
<li>Client&#39;s CUIL (Tax identification number in Argentina)</li>
<li>Client&#39;s address</li>
<li>What they bought. For example: <strong>EZEPUJEZE</strong> for a flight ticket from <strong>Ezeiza</strong> (Buenos Aires, Argentina) to <strong>Punta Cana</strong> (MÃ©xico)</li>
<li>How much they paid</li>
</ul>

<p>Here is a sample of one of the <strong>public bills</strong> that should have been <strong>private</strong>:</p>

<p><img src="/blog/assets/images/factura-example.jpg" alt="One of the non-private bills" class="medium-img"></p>

<p>Fortunately, you couldn&#39;t see when this trip was happening.</p>

<p>During the many days that this vulnerability was on production, someone with some programming knowledge could have created a script that iterated from 1 to 100,000 (for the bill number) and from A to C (for the bill type) sending GET requests and downloading all the billing information from Almundo.</p>

<p>Considering that <a href="http://superfactura.com.ar/">Superfactura</a> has a few clients, we can only assume that this vulnerability was also in production for all of their clients.</p>

<p>At the time of this publication, the company had not released any information about this vulnerability nor if any sensitive data was downloaded by unauthorized users.</p>
 <a class="read-more" href="/blog/security/almundo-bill-vulnerability.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/9299203e7e9b9ae35e39eb66f3155f15?s=50" alt="Ernesto Tagwerker" nopin="nopin" />
  
  <a href="/blog/authors/etagwerker"
     title="Articles by Ernesto Tagwerker">
     Ernesto Tagwerker
  </a>


 
  on
    
      <a href="/blog/tags/security"
         title="Articles about Security">Security</a>



<time class="post-date" datetime="2015-08-25">
  25 Aug 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/open-source/the-7-days-open-source-challenge.html">The 7 Days Open Source Challenge</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Last Wednesday I gave a lightning talk about open source at the <a href="http://www.meetup.com/rubyba/events/223814545/">Buenos Aires Ruby Meetup</a>. I proposed a challenge to all attendees: Contribute to one (or many) open source projects for 7 days straight.</p>

<p>The rules are simple:</p>

<ul>
<li>You have to do it for 7 days straight</li>
<li>If you can&#39;t do it one day, that breaks your streak</li>
<li>When you break your streak, you have to start over from day 1</li>
</ul>

<p>The goal of this challenge is to <strong>make contributing to open source projects a habit</strong>.</p>

<p>You can see the slides over here:</p>

<p><iframe src="//www.slideshare.net/slideshow/embed_code/key/dNhZJXClUW05B" width="510" height="420" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/ombulabs/the-7-days-open-source-challenge" title="The 7 Days Open Source Challenge" target="_blank">The 7 Days Open Source Challenge</a> </strong> from <strong><a href="//www.slideshare.net/ombulabs" target="_blank">Ombu Labs, The Lean Software Boutique</a></strong> </div></p>

<p>I did this challenge because I wanted to get back to contributing to a couple of projects that I currently maintain. It was great and I finally made some progress in <a href="https://github.com/DatabaseCleaner/database_cleaner/">DatabaseCleaner</a></p>

<p>I hope that this challenge will encourage other developers to start contributing to their favorite projects.</p>

<p>Here are a couple of ways that you can contribute to open source:</p>

<ul>
<li>Submit a new issue to a library. Make sure that it hasn&#39;t been reported yet. If it has, add meaningful information to the issue to make it easier to solve it</li>
<li>Try to solve an existing issue. Find the lines of code that are causing the problem and submit a pull request</li>
<li>If you can&#39;t solve it, write a failing scenario in the library&#39;s test suite</li>
<li>Improve documentation where it&#39;s unclear or non-existent</li>
</ul>

<p>If you don&#39;t know where to begin, check out <a href="http://www.codetriage.com/">http://www.codetriage.com</a> or ping me (I&#39;m one of the maintainers of <a href="https://github.com/DatabaseCleaner/database_cleaner/">DatabaseCleaner</a> and <a href="https://github.com/bmabey/email-spec">EmailSpec</a> and I&#39;d appreciate your help)</p>
 <a class="read-more" href="/blog/open-source/the-7-days-open-source-challenge.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/9299203e7e9b9ae35e39eb66f3155f15?s=50" alt="Ernesto Tagwerker" nopin="nopin" />
  
  <a href="/blog/authors/etagwerker"
     title="Articles by Ernesto Tagwerker">
     Ernesto Tagwerker
  </a>


 
  on
    
      <a href="/blog/tags/open-source"
         title="Articles about Open Source">Open Source</a>



<time class="post-date" datetime="2015-08-04">
  04 Aug 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/ruby/slack-notifications-with-slack-notify.html">Slack notifications with Slack-Notify gem</a></h2>
    </header>
    <section class="post-excerpt">
        <p>We have been using Slack at <a href="http://www.ombulabs.com">OmbuLabs</a> for a while now
after switching from HipChat, and haven&#39;t looked back. It looks and feels much
better than any other available platform of its kind. Slack provides
<a href="https://api.slack.com/incoming-webhooks">WebHooks</a>, which you can use to post
messages to your team&#39;s channels.</p>

<p>We use <a href="https://www.solanolabs.com">Solano CI</a> (formerly Tddium) for our
automated builds. By default, the system sends e-mails whenever a build passes
or fails, but we wanted to be notified in our Slack channels. Enter the
<a href="https://github.com/sosedoff/slack-notify">slack-notify</a> gem, which makes
Slack notifications super simple in Ruby.</p>

<p>To get started, first
<a href="https://my.slack.com/services/new/incoming-webhook">set up an incoming webhook</a>.</p>

<p>Once that&#39;s done, you can create the Rake task which Solano can run when
the build has finished running:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="k">def</span> <span class="nf">current_branch</span>
    <span class="sb">`git symbolic-ref HEAD 2&gt;/dev/null | cut -d&quot;/&quot; -f 3-`</span><span class="o">.</span><span class="n">strip</span>
  <span class="k">end</span>

  <span class="n">task</span> <span class="ss">:post_build_hook</span> <span class="k">do</span>
    <span class="nb">require</span> <span class="s1">&#39;slack-notify&#39;</span>

    <span class="n">webhook_url</span> <span class="o">=</span> <span class="s2">&quot;https://hooks.slack.com/services/your-hook&quot;</span>
    <span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;TDDIUM_API_SERVER&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">session_id</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;TDDIUM_SESSION_ID&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">build_status</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;TDDIUM_BUILD_STATUS&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">client</span> <span class="o">=</span> <span class="no">SlackNotify</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">channel</span><span class="p">:</span> <span class="s2">&quot;#your-channel&quot;</span><span class="p">,</span>
                                     <span class="ss">webhook_url</span><span class="p">:</span> <span class="n">webhook_url</span><span class="p">,</span>
                                     <span class="ss">username</span><span class="p">:</span> <span class="s2">&quot;Solano CI&quot;</span><span class="p">,</span>
                                     <span class="ss">icon_emoji</span><span class="p">:</span> <span class="s2">&quot;:shipit:&quot;</span><span class="p">)</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;_</span><span class="si">#{</span><span class="n">current_branch</span><span class="si">}</span><span class="s2">_ *</span><span class="si">#{</span><span class="n">build_status</span><span class="si">}</span><span class="s2">*! &quot;</span>
    <span class="n">msg</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Check build details at: &quot;</span>
    <span class="n">msg</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;http://</span><span class="si">#{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/1/reports/</span><span class="si">#{</span><span class="n">session_id</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">client</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div>

<p>This will let #your-channel know the branch for which the build ran, whether it passed,
failed or errored, and a link to the build report.</p>

<p>You also need to explicitly call it after the build is finished in your
<code>solano.yml</code> or <code>tddium.yml</code> file:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">:tddium</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">:hooks</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">:post_build</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">RAILS_ENV=test bundle exec rake tddium:post_build_hook</span>
</code></pre></div>

<p>We have also set up deployment notifications, so whenever someone deploys to
production, the Slack channel is notified:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">namespace</span> <span class="ss">:notify</span> <span class="k">do</span>
  <span class="n">task</span> <span class="ss">:start</span><span class="p">,</span> <span class="ss">roles</span><span class="p">:</span> <span class="o">[</span><span class="ss">:app</span><span class="o">]</span> <span class="k">do</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">USERNAME</span><span class="si">}</span><span class="s2"> started deploying </span><span class="si">#{</span><span class="no">REPO</span><span class="si">}</span><span class="s2"> (</span><span class="si">#{</span><span class="no">GIT_TAG</span><span class="si">}</span><span class="s2">) to production&quot;</span>
    <span class="n">notify_slack</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">task</span> <span class="ss">:done</span><span class="p">,</span> <span class="ss">roles</span><span class="p">:</span> <span class="o">[</span><span class="ss">:app</span><span class="o">]</span> <span class="k">do</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">USERNAME</span><span class="si">}</span><span class="s2"> just deployed </span><span class="si">#{</span><span class="no">REPO</span><span class="si">}</span><span class="s2"> (</span><span class="si">#{</span><span class="no">GIT_TAG</span><span class="si">}</span><span class="s2">) to production&quot;</span>
    <span class="n">notify_slack</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">before</span> <span class="s2">&quot;deploy&quot;</span><span class="p">,</span> <span class="s2">&quot;notify:start&quot;</span>
<span class="n">after</span> <span class="s2">&quot;deploy&quot;</span><span class="p">,</span> <span class="s2">&quot;notify:done&quot;</span>
</code></pre></div>

<p>There are many different use cases, just make sure not to spam your team with
too many notifications. At some point, you may want to set up a
channel dedicated solely to notifications if you are part of a bigger team.</p>
 <a class="read-more" href="/blog/ruby/slack-notifications-with-slack-notify.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/350875eb8fce8553e12040c5a1f5d5d0?s=50" alt="Mauro Otonelli" nopin="nopin" />
  
  <a href="/blog/authors/mauro-oto"
     title="Articles by Mauro Otonelli">
     Mauro Otonelli
  </a>


 
  on
    
      <a href="/blog/tags/ruby"
         title="Articles about Ruby">Ruby</a>



<time class="post-date" datetime="2015-07-29">
  29 Jul 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/ruby/rails/best-practices/why-using-default-scope-is-a-bad-idea.html">Why using default_scope is a bad idea</a></h2>
    </header>
    <section class="post-excerpt">
        <p><code>default_scope</code> is a method provided by ActiveRecord, which allows you to set
a default scope (as its name implies) for all operations done on a given model.
It can be useful for allowing soft-deletion in your models, by having a
<code>deleted_on</code> column on your model and setting the default scope to
<code>deleted_on: nil</code></p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Animal</span>
  <span class="n">default_scope</span> <span class="n">where</span><span class="p">(</span><span class="ss">deleted_on</span><span class="p">:</span> <span class="kp">nil</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>

<p>This will hide deleted records and only return non-deleted
ones in your queries after setting <code>deleted_on</code> instead of
calling <code>destroy</code>.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&gt;</span> <span class="no">Animal</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
  <span class="no">Animal</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">4</span><span class="o">.</span><span class="mi">2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span> <span class="sb">`animals`</span><span class="o">.</span><span class="n">*</span> <span class="no">FROM</span> <span class="sb">`animals`</span> <span class="no">WHERE</span> <span class="sb">`animals`</span><span class="o">.</span><span class="n">`deleted_on</span><span class="sb">` IS NULL LIMIT 5</span>
</code></pre></div>

<p>Quite useful! However, <code>default_scope</code> has a dangerous behavior:
<strong>it affects your model&#39;s initialization.</strong></p>

<p>Say you were using STI on your <code>Animal</code> model, and you had a <code>default_scope</code>
for always filtering your model by &quot;Cat&quot;:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Animal</span>
  <span class="n">default_scope</span> <span class="n">where</span><span class="p">(</span><span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;Cat&quot;</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>

<p>When you initialize a new Animal, it will always use the value defined in
your default scope:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&gt;</span> <span class="no">Animal</span><span class="o">.</span><span class="n">new</span>
<span class="o">=&gt;</span> <span class="c1">#&lt;Animal id: nil, created_at: nil, updated_at: nil, type: &quot;Cat&quot;&gt;</span>
</code></pre></div>

<p>This can lead to some headaches when you&#39;re not aware of this side-effect, and
depending on the default scoped attribute/value it can cause some pretty bad
bugs.</p>

<p>Also, I&#39;d like to mention the fact that it&#39;s very difficult to write queries
once you have used <code>default_scope</code> on a model. For example:
<code>Animal.where(&#39;deleted_on is not null&#39;)</code> won&#39;t work, you&#39;d need to use
<code>Animal.unscoped</code>, which makes everything awkward. You also need to use
<code>unscoped</code> carefully, because it will remove all scopes of the relation, not just
the default scope.</p>

<p>I recommend that you always avoid default scope if possible. Prefer explicit
scopes instead. If you really need to use it, use it with care.</p>
 <a class="read-more" href="/blog/ruby/rails/best-practices/why-using-default-scope-is-a-bad-idea.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/350875eb8fce8553e12040c5a1f5d5d0?s=50" alt="Mauro Otonelli" nopin="nopin" />
  
  <a href="/blog/authors/mauro-oto"
     title="Articles by Mauro Otonelli">
     Mauro Otonelli
  </a>


 
  on
    
      <a href="/blog/tags/ruby"
         title="Articles about Ruby">Ruby</a>,
      <a href="/blog/tags/rails"
         title="Articles about Rails">Rails</a>,
      <a href="/blog/tags/best-practices"
         title="Articles about Best Practices">Best Practices</a>



<time class="post-date" datetime="2015-07-20">
  20 Jul 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/security/mercado-pago-security-vulnerability.html">Mercado Pago Security Hole</a></h2>
    </header>
    <section class="post-excerpt">
        <p>On April 17th we discovered a security vulnerability in the <a href="https://www.mercadopago.com.ar/developers/en/api-docs/">Mercado Pago API</a>. Before disclosing this information, we contacted <a href="http://www.mercadolibre.com/">Mercado Libre</a> and sent them a detailed report of the security hole and how to reproduce it.</p>

<p>The vulnerability allowed anyone to get an access token without using the right secret for an account.</p>

<p>You can see how the authentication process works on Mercado Pago over here: <a href="https://www.mercadopago.com.ar/developers/en/api-docs/basics/authentication/">https://www.mercadopago.com.ar/developers/en/api-docs/basics/authentication/</a></p>

<p>After 7 hours, Mercado Pago fixed the vulnerability in their production environment.</p>

<h2>How we reproduced the bug</h2>

<p>This example uses Ruby 2.1.2 and the <a href="https://rubygems.org/gems/mercadopago">mercadopago</a> gem.</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">2.1.2 :001 &gt; token = MercadoPago::Authentication.access_token(&quot;8872&quot;, &quot;lalalala&quot;)
</code></pre></div>

<p>The first parameter is the client id (an account in Mercado Pago) and the second parameter is the secret (only the account holder should know this)</p>

<p>For client id we used <code>8872</code> which doesn&#39;t belong to us and for secret we used <code>lalalala</code> to show that it wasn&#39;t really <em>the right secret.</em></p>

<p>With that information, we were able to acquire the token. With it you can access a lot of information associated with the payments in the account.</p>

<p>For example:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="no">MercadoPago</span><span class="o">::</span><span class="no">Collection</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">token</span><span class="o">[</span><span class="s2">&quot;access_token&quot;</span><span class="o">]</span><span class="p">,</span> <span class="ss">status</span><span class="p">:</span> <span class="ss">:approved</span><span class="p">)</span>
</code></pre></div>

<p>With this query, you could see all the approved transactions for an account <strong>that didn&#39;t belong to you</strong>.</p>

<p>For example:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">=&gt;</span> <span class="p">{</span><span class="s2">&quot;paging&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;total&quot;</span><span class="o">=&gt;</span><span class="mi">98</span><span class="p">,</span> <span class="s2">&quot;limit&quot;</span><span class="o">=&gt;</span><span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;offset&quot;</span><span class="o">=&gt;</span><span class="mi">0</span><span class="p">},</span>
    <span class="s2">&quot;results&quot;</span><span class="o">=&gt;[</span>
      <span class="p">{</span><span class="s2">&quot;collection&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">=&gt;</span><span class="mi">753859418</span><span class="p">,</span> <span class="s2">&quot;site_id&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;MLA&quot;</span><span class="p">,</span>
       <span class="s2">&quot;date_created&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2014-03-13T16:58:20.000-04:00&quot;</span><span class="p">,</span>
       <span class="s2">&quot;date_approved&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2014-03-13T17:00:38.000-04:00&quot;</span><span class="p">,</span>
       <span class="s2">&quot;last_modified&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2014-03-13T17:00:38.000-04:00&quot;</span><span class="p">,</span>
       <span class="s2">&quot;money_release_date&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2014-03-15T17:00:38.000-04:00&quot;</span><span class="p">,</span>
       <span class="s2">&quot;operation_type&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;regular_payment&quot;</span><span class="p">,</span>
       <span class="s2">&quot;collector_id&quot;</span><span class="o">=&gt;</span><span class="mi">16605960</span><span class="p">,</span> <span class="s2">&quot;sponsor_id&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
       <span class="s2">&quot;payer&quot;</span><span class="o">=&gt;</span><span class="p">{</span>
         <span class="s2">&quot;nickname&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;XOMBULABSX&quot;</span><span class="p">,</span>
         <span class="s2">&quot;first_name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;JON&quot;</span><span class="p">,</span>
         <span class="s2">&quot;last_name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;SNOW&quot;</span><span class="p">,</span>
         <span class="s2">&quot;phone&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;area_code&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;291&quot;</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;123412&quot;</span><span class="p">,</span> <span class="s2">&quot;extension&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">},</span>
         <span class="s2">&quot;email&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;security@ombulabs.com&quot;</span><span class="p">,</span>
         <span class="s2">&quot;id&quot;</span><span class="o">=&gt;</span><span class="mi">83110350</span><span class="p">,</span>
         <span class="s2">&quot;identification&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">}},</span>
         <span class="s2">&quot;external_reference&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;1448&quot;</span><span class="p">,</span>
         <span class="s2">&quot;merchant_order_id&quot;</span><span class="o">=&gt;</span><span class="mi">11567450</span><span class="p">,</span>
         <span class="s2">&quot;reason&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Premium package&quot;</span><span class="p">,</span> <span class="s2">&quot;currency_id&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;ARS&quot;</span><span class="p">,</span>
         <span class="s2">&quot;transaction_amount&quot;</span><span class="o">=&gt;</span><span class="mi">81</span><span class="p">,</span> <span class="s2">&quot;total_paid_amount&quot;</span><span class="o">=&gt;</span><span class="mi">81</span><span class="p">,</span>
         <span class="s2">&quot;shipping_cost&quot;</span><span class="o">=&gt;</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">&quot;account_money_amount&quot;</span><span class="o">=&gt;</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">&quot;mercadopago_fee&quot;</span><span class="o">=&gt;</span><span class="mi">4</span><span class="o">.</span><span class="mi">85</span><span class="p">,</span>
         <span class="s2">&quot;net_received_amount&quot;</span><span class="o">=&gt;</span><span class="mi">76</span><span class="o">.</span><span class="mi">15</span><span class="p">,</span>
         <span class="s2">&quot;marketplace_fee&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
         <span class="s2">&quot;coupon_id&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
         <span class="s2">&quot;coupon_amount&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
         <span class="s2">&quot;coupon_fee&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
         <span class="s2">&quot;finance_fee&quot;</span><span class="o">=&gt;</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">&quot;status&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;approved&quot;</span><span class="p">,</span>
         <span class="s2">&quot;status_detail&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;accredited&quot;</span><span class="p">,</span>
         <span class="s2">&quot;status_code&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;00&quot;</span><span class="p">,</span>
         <span class="s2">&quot;released&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;yes&quot;</span><span class="p">,</span>
         <span class="s2">&quot;payment_type&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;credit_card&quot;</span><span class="p">,</span>
         <span class="s2">&quot;installments&quot;</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span>
         <span class="s2">&quot;installment_amount&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
         <span class="s2">&quot;deferred_period&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
         <span class="s2">&quot;cardholder&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;JON SNOW&quot;</span><span class="p">,</span> <span class="s2">&quot;identification&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;DNI&quot;</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;26000000&quot;</span><span class="p">}},</span>
         <span class="s2">&quot;statement_descriptor&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;WWW.MERCADOPAGO.COM&quot;</span><span class="p">,</span>
         <span class="s2">&quot;transaction_order_id&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span> <span class="s2">&quot;marketplace&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;NONE&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="o">=&gt;[]</span><span class="p">,</span>
         <span class="s2">&quot;notification_url&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">}},</span>
      <span class="p">{</span><span class="s2">&quot;collection&quot;</span><span class="o">=&gt;</span>
        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">=&gt;</span><span class="mi">756415807</span><span class="p">,</span>
        <span class="s2">&quot;site_id&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;MLA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;date_created&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2014-03-20T15:42:35.000-04:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;date_approved&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2014-03-20T15:42:35.000-04:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_modified&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2014-03-20T15:42:35.000-04:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;money_release_date&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2014-03-22T15:42:35.000-04:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation_type&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;regular_payment&quot;</span><span class="p">,</span>
        <span class="s2">&quot;collector_id&quot;</span><span class="o">=&gt;</span><span class="mi">16605960</span><span class="p">,</span>
        <span class="s2">&quot;sponsor_id&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
        <span class="s2">&quot;payer&quot;</span><span class="o">=&gt;</span><span class="p">{</span>
          <span class="s2">&quot;nickname&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;YOURNICKNAME&quot;</span><span class="p">,</span>
          <span class="s2">&quot;first_name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Matias&quot;</span><span class="p">,</span>
          <span class="s2">&quot;last_name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;OMBU&quot;</span><span class="p">,</span>
          <span class="s2">&quot;phone&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;area_code&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;291&quot;</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;4000000&quot;</span><span class="p">,</span> <span class="s2">&quot;extension&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">},</span>
          <span class="s2">&quot;email&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;hola@ombulabs.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;id&quot;</span><span class="o">=&gt;</span><span class="mi">18878708</span><span class="p">,</span>
          <span class="s2">&quot;identification&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">}},</span>
        <span class="s2">&quot;external_reference&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;1457&quot;</span><span class="p">,</span>
        <span class="s2">&quot;merchant_order_id&quot;</span><span class="o">=&gt;</span><span class="mi">13031193</span><span class="p">,</span>
        <span class="s2">&quot;reason&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Premium package&quot;</span><span class="p">,</span>
        <span class="s2">&quot;currency_id&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;ARS&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transaction_amount&quot;</span><span class="o">=&gt;</span><span class="mi">81</span><span class="p">,</span>
        <span class="s2">&quot;total_paid_amount&quot;</span><span class="o">=&gt;</span><span class="mi">81</span><span class="p">,</span>
        <span class="s2">&quot;shipping_cost&quot;</span><span class="o">=&gt;</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;account_money_amount&quot;</span><span class="o">=&gt;</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;mercadopago_fee&quot;</span><span class="o">=&gt;</span><span class="mi">4</span><span class="o">.</span><span class="mi">85</span><span class="p">,</span>
        <span class="s2">&quot;net_received_amount&quot;</span><span class="o">=&gt;</span><span class="mi">76</span><span class="o">.</span><span class="mi">15</span><span class="p">,</span>
        <span class="s2">&quot;marketplace_fee&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
        <span class="s2">&quot;coupon_id&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
        <span class="s2">&quot;coupon_amount&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
        <span class="s2">&quot;coupon_fee&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span> <span class="s2">&quot;finance_fee&quot;</span><span class="o">=&gt;</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;status&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;approved&quot;</span><span class="p">,</span>
        <span class="s2">&quot;status_detail&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;accredited&quot;</span><span class="p">,</span>
        <span class="s2">&quot;status_code&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;released&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;yes&quot;</span><span class="p">,</span>
        <span class="s2">&quot;payment_type&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;credit_card&quot;</span><span class="p">,</span>
        <span class="s2">&quot;installments&quot;</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;installment_amount&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
        <span class="s2">&quot;deferred_period&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
        <span class="s2">&quot;cardholder&quot;</span><span class="o">=&gt;</span>
          <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
           <span class="s2">&quot;identification&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">}},</span>
        <span class="s2">&quot;statement_descriptor&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;WWW.MERCADOPAGO.COM&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transaction_order_id&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">,</span>
        <span class="s2">&quot;marketplace&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;NONE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tags&quot;</span><span class="o">=&gt;[]</span><span class="p">,</span>
        <span class="s2">&quot;notification_url&quot;</span><span class="o">=&gt;</span><span class="kp">nil</span><span class="p">}},</span>
        <span class="o">.</span><span class="n">.</span><span class="o">.</span>
      <span class="p">}</span>
</code></pre></div>

<p><em>The sensitive information in this code snippet has been intentionally changed</em></p>

<p>So, during the time that this vulnerability was live (at least 7 hours) an attacker could have used it to:</p>

<ul>
<li><p>Find information about all the payments that your account had received since you started using the service</p></li>
<li><p>Find information about your clients, their DNI, name, phone number</p></li>
</ul>

<p>All the attacker needed to exploit this vulnerability was a Mercado Pago account ID and some basic tech knowledge.</p>

<h2>How we discovered this bug</h2>

<p>At <a href="http://www.ombushop.com">OmbuShop</a>, our integration tests use the Mercado Pago sandbox to check that the amount that a client has to pay is correct. I know that this isn&#39;t ideal (or is it?) but it&#39;s as real as it gets for our integration tests.</p>

<p>One of our tests checked that you couldn&#39;t get collections information with the wrong user credentials. When the test started failing in our continuous tests, we started digging around and found this security hole.</p>

<h2>What worries me</h2>

<p>It&#39;s hard to understand how such a big payment processor never published information about this security hole. I would expect them to know if some information was accessed by people who didn&#39;t have access to it.</p>

<p>They could check their access logs and see who accessed their API using a secret that wasn&#39;t the right one. Then they could inform their customers of this problem and warn them about this situation.</p>

<p>Mercado Pago, a product of Mercado Libre (<a href="http://www.nasdaq.com/symbol/meli">$MELI</a>) which is a publicly traded company, doesn&#39;t even have public versioning information of their API nor a continuous integration suite that would catch such an obvious vulnerability.</p>

<p>Maybe I am just used to the security reports published by Github about <a href="https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation">their vulnerabilities</a>. Maybe Github is way more serious than Mercado Pago about privacy and online security.</p>

<p>I think that Mercado Pago needs to step up their game and be more transparent about their platform and user privacy.</p>

<p>A good place to start would be a better way to receive security vulnerability reports and disclosing information about their security problems.</p>

<p>Until today, they haven&#39;t disclosed any information about this security hole and it&#39;s very hard to find a way to report a security issue to them.</p>
 <a class="read-more" href="/blog/security/mercado-pago-security-vulnerability.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/9299203e7e9b9ae35e39eb66f3155f15?s=50" alt="Ernesto Tagwerker" nopin="nopin" />
  
  <a href="/blog/authors/etagwerker"
     title="Articles by Ernesto Tagwerker">
     Ernesto Tagwerker
  </a>


 
  on
    
      <a href="/blog/tags/security"
         title="Articles about Security">Security</a>



<time class="post-date" datetime="2015-07-14">
  14 Jul 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/lean-startup/the-lean-startup-way.html">The Lean Startup Way</a></h2>
    </header>
    <section class="post-excerpt">
        <p>At <a href="http://www.ombulabs.com">OmbuLabs</a> we like to split our time working on our own products, client projects, and open source code. We have embraced the Lean Startup methodology not only for our own products but also for our client projects.</p>

<p>It is easier to apply the methodology to our own products than to our client projects. With our products, we decide what goals we want to reach and what experiments we are going to run to validate our hypotheses.</p>

<p>And we have ran many experiments to create and maintain these products:</p>

<ul>
<li><a href="http://www.ombushop.com/">OmbuShop</a>: The best way to setup your online shop in Latin America. A SaaS product that enables businesses to easily setup their online shop.</li>
<li><a href="http://www.vidrieras.in/">Vidrieras.in</a>: A directory of businesses in Argentina.</li>
<li><a href="http://bolognesa.herokuapp.com/">Bolognesa</a>: A <a href="http://pomodorotechnique.com/">Pomodoro</a> tracker.</li>
</ul>

<p>With client projects, we first need to explain what the <a href="http://theleanstartup.com/">Lean Startup</a> methodology is. The best clients we have had already had an understanding of the methodology.</p>

<p>Once they understand it, we can work with them and define their minimum viable product scope. This minimal project will usually take between one and two months. This time requirement is very important, because it will help us to narrow the scope.</p>

<p>The idea is to test their core hypotheses with their target market.</p>

<p>Once we have designed, implemented, tested and deployed their <a href="http://leanstack.com/minimum-viable-product/">MVP</a>, it&#39;s time to start gathering data about the target market. This is how the build, measure, learn cycle begins.</p>

<p>Every time we deploy a product, we need to make sure that we are tracking the right numbers. For basic projects we prefer <a href="http://www.google.com/analytics/">Google Analytics</a>, for more complex projects we prefer <a href="https://mixpanel.com/">Mixpanel</a>.</p>

<p>If it is an e-commerce application, we need to make sure to track the conversions from day 1. If it is a SaaS application, we need to track the funnels from day 1.</p>

<p>This data will allow us to continue improving the product.</p>

<p>Every time we finish an iteration, we should measure the key indicators and make sure that we have improved the product. If we see the numbers drop, we should rollback to the previous state of the application.</p>

<p>We won&#39;t suggest that you A/B test everything from day 1, but some changes will be A/B tested to confirm that the change actually improves the key metric we are trying to improve.</p>

<p>We truly believe that the Lean Startup way is the best for both our clients and us. We want to build successful products for them, so that we can continue working with them over a long period of time. It&#39;s a <strong>win/win</strong> situation.</p>
 <a class="read-more" href="/blog/lean-startup/the-lean-startup-way.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/9299203e7e9b9ae35e39eb66f3155f15?s=50" alt="Ernesto Tagwerker" nopin="nopin" />
  
  <a href="/blog/authors/etagwerker"
     title="Articles by Ernesto Tagwerker">
     Ernesto Tagwerker
  </a>


 
  on
    
      <a href="/blog/tags/lean-startup"
         title="Articles about Lean Startup">Lean Startup</a>



<time class="post-date" datetime="2015-06-30">
  30 Jun 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/git/github/how-to-git-push-with-blocked-ports.html">How to Git push with blocked ports</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Often times I find myself working out of a coffee shop with a <strong>terrible Internet connection</strong>. We have a nice office at <a href="https://es.foursquare.com/v/ombushop-hq/52f0e47311d25da04d101b62">OmbuLabs</a> but there is still that <em>Je ne sais quoi</em> at coffee shops.</p>

<p>The cool thing about <a href="https://git-scm.com/">Git</a> is that you can <code>git commit</code> all your changes while enjoying a cup of coffee and <code>git push</code> later (when you&#39;re back at home with a decent connection)</p>

<p>But what if you want to <code>git push</code> from the coffee shop? Sometimes the only ports that are open are port 80 (HTTP) and 443 (HTTPS).</p>

<p>If your Git remote repository supports HTTPS, you can easily push to it by following these steps:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">git remote add origin-https https://github.com/DatabaseCleaner/database_cleaner.git
git push origin-https master
</code></pre></div>

<p>A Git repository can have as many remote repositories as you want, so I like to keep <code>origin</code> and <code>origin-https</code> to <code>git push</code> whenever I want.</p>

<p>You will have to enter your username and password to authenticate with Github.</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">$ git push origin-https master
Username for &#39;https://github.com&#39;: etagwerker
Password for &#39;https://etagwerker@github.com&#39;:
Everything up-to-date
</code></pre></div>

<p>Now you can <code>git push</code> even on shitty Internet connections.</p>
 <a class="read-more" href="/blog/git/github/how-to-git-push-with-blocked-ports.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/9299203e7e9b9ae35e39eb66f3155f15?s=50" alt="Ernesto Tagwerker" nopin="nopin" />
  
  <a href="/blog/authors/etagwerker"
     title="Articles by Ernesto Tagwerker">
     Ernesto Tagwerker
  </a>


 
  on
    
      <a href="/blog/tags/git"
         title="Articles about Git">Git</a>,
      <a href="/blog/tags/github"
         title="Articles about Github">Github</a>



<time class="post-date" datetime="2015-06-28">
  28 Jun 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/software-development/software-quality/our-definition-of-done.html">Our Definition of "Done"</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Quality should be present in everything you do, but it should be balanced with the time you spend working on a feature. Does it feel like you&#39;ve been working on this feature for a <strong>really long time</strong>? Maybe you have. Is it &quot;done&quot;?</p>

<p>That is a tough question, so I&#39;ll write down <em>our definition of done</em>.</p>

<h2>When is a feature done?</h2>

<ul>
<li>The feature does what it is expected to do</li>
<li>If it has a user interface, the <a href="http://www.helloerik.com/ux-is-not-ui">UX</a> is simple and good enough: A <em>human</em> can use it!</li>
<li>If it is code for other programmers, the <a href="http://c2.com/cgi/wiki?InterfaceSegregationPrinciple">public contract</a> is clear: A programmer read the documentation and use it</li>
<li>It has a <a href="http://c2.com/cgi/wiki?CodeCoverage">decent spec</a>, which covers at least two scenarios (not just the happy path)</li>
<li>It is fast!</li>
<li>The build passes (it doesn&#39;t break any of the existing specs)</li>
<li>The code is easy to maintain (<a href="http://c2.com/cgi/wiki?DontRepeatYourself">DRY</a>&#39;ed)</li>
</ul>

<p>Have you spent 2 days in a feature that should&#39;ve been done in 2 hours? Have you spent 2 hours on a bug fix that should&#39;ve taken you 8 hours? If so, why?</p>

<p>If the feature is big, break it into smaller features. This will make it easier to move ahead.</p>

<p>Before you submit your <a href="https://help.github.com/articles/using-pull-requests">pull request</a>, make sure that you have considered this list.</p>
 <a class="read-more" href="/blog/software-development/software-quality/our-definition-of-done.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/9299203e7e9b9ae35e39eb66f3155f15?s=50" alt="Ernesto Tagwerker" nopin="nopin" />
  
  <a href="/blog/authors/etagwerker"
     title="Articles by Ernesto Tagwerker">
     Ernesto Tagwerker
  </a>


 
  on
    
      <a href="/blog/tags/software-development"
         title="Articles about Software Development">Software Development</a>,
      <a href="/blog/tags/software-quality"
         title="Articles about Software Quality">Software Quality</a>



<time class="post-date" datetime="2015-06-18">
  18 Jun 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/ruby/benchmark/enumerator-grep-vs-enumerator-select.html">Enumerable#grep vs Enumerable#select</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Often, <code>Enumerable#select</code> is the chosen method to obtain elements from an
Array for a given block. Without thinking twice, we may be doing more work than
necessary by not taking advantage of another method from the Enumerable module,
<code>Enumerable#grep</code>.</p>

<p><code>Enumerable#grep</code> can not always be used instead of <code>Enumerable#select</code>, but
when it can, <code>#grep</code> provides better readability and a small speed improvement
over <code>#select</code>.</p>

<p>See the benchmark below for example, which uses the class matcher for <code>#grep</code>:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">041</span> <span class="o">&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">100000</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span> <span class="p">}</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">042</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">100000</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span> <span class="p">}</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">043</span> <span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">044</span> <span class="o">&gt;</span> <span class="no">Benchmark</span><span class="o">.</span><span class="n">bm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">045</span> <span class="o">&gt;</span>   <span class="n">b</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">)</span>    <span class="p">{</span> <span class="n">c</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span><span class="o">.</span><span class="n">is_a?</span> <span class="nb">Integer</span> <span class="p">}</span> <span class="p">}</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">046</span><span class="o">?&gt;</span>   <span class="n">b</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;grep&quot;</span><span class="p">)</span>      <span class="p">{</span> <span class="n">c</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="nb">Integer</span><span class="p">)</span> <span class="p">}</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">047</span><span class="o">?&gt;</span> <span class="k">end</span>
                 <span class="n">user</span>     <span class="nb">system</span>      <span class="n">total</span>        <span class="n">real</span>
<span class="nb">select</span>       <span class="mi">0</span><span class="o">.</span><span class="mo">040000</span>   <span class="mi">0</span><span class="o">.</span><span class="mo">000000</span>   <span class="mi">0</span><span class="o">.</span><span class="mo">040000</span> <span class="p">(</span>  <span class="mi">0</span><span class="o">.</span><span class="mo">0377</span><span class="mi">99</span><span class="p">)</span>
<span class="n">grep</span>         <span class="mi">0</span><span class="o">.</span><span class="mo">020000</span>   <span class="mi">0</span><span class="o">.</span><span class="mo">000000</span>   <span class="mi">0</span><span class="o">.</span><span class="mo">020000</span> <span class="p">(</span>  <span class="mi">0</span><span class="o">.</span><span class="mo">02374</span><span class="mi">9</span><span class="p">)</span>

<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">04</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span><span class="o">.</span><span class="n">is_a?</span> <span class="nb">Integer</span> <span class="p">}</span> <span class="o">==</span> <span class="n">c</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="nb">Integer</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
</code></pre></div>

<p>You can also see its power when using Regexp patterns, which is not only faster
but also less verbose, which is enough of a win to favor it over <code>#select</code>:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">04</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">100000</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="mi">65</span> <span class="o">+</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">26</span><span class="p">))</span><span class="o">.</span><span class="n">chr</span> <span class="p">}</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">050</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">100000</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span> <span class="p">}</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">051</span> <span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">052</span> <span class="o">&gt;</span> <span class="no">Benchmark</span><span class="o">.</span><span class="n">bm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">053</span> <span class="o">&gt;</span>   <span class="n">b</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">)</span>    <span class="p">{</span> <span class="n">c</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="sr">/^\d*$/</span> <span class="o">===</span> <span class="n">x</span><span class="p">}</span> <span class="p">}</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">054</span><span class="o">?&gt;</span>   <span class="n">b</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;grep&quot;</span><span class="p">)</span>      <span class="p">{</span> <span class="n">c</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="sr">/^\d*$/</span><span class="p">)</span> <span class="p">}</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">055</span><span class="o">?&gt;</span> <span class="k">end</span>
                 <span class="n">user</span>     <span class="nb">system</span>      <span class="n">total</span>        <span class="n">real</span>
<span class="nb">select</span>       <span class="mi">0</span><span class="o">.</span><span class="mo">020000</span>   <span class="mi">0</span><span class="o">.</span><span class="mo">000000</span>   <span class="mi">0</span><span class="o">.</span><span class="mo">020000</span> <span class="p">(</span>  <span class="mi">0</span><span class="o">.</span><span class="mo">02105</span><span class="mi">8</span><span class="p">)</span>
<span class="n">grep</span>         <span class="mi">0</span><span class="o">.</span><span class="mo">020000</span>   <span class="mi">0</span><span class="o">.</span><span class="mo">000000</span>   <span class="mi">0</span><span class="o">.</span><span class="mo">020000</span> <span class="p">(</span>  <span class="mi">0</span><span class="o">.</span><span class="mo">012626</span><span class="p">)</span>
</code></pre></div>

<p>There are some pretty good use cases for <code>#grep</code>, and one last thing worth
keeping in mind: <code>#grep</code> can take a second parameter, which acts
as <code>#map</code> does and reads very nicely. For example:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">056</span> <span class="o">&gt;</span> <span class="n">hello</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;Hello&#39;</span><span class="p">,</span> <span class="s1">&#39;ello&#39;</span><span class="p">,</span> <span class="s1">&#39;llo&#39;</span><span class="p">,</span> <span class="s1">&#39;lo&#39;</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="o">]</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">057</span> <span class="o">&gt;</span> <span class="n">hello</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="sr">/[A-Z]\w+/</span> <span class="o">===</span> <span class="n">x</span> <span class="p">}</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:downcase</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="o">[</span><span class="s2">&quot;hello&quot;</span><span class="o">]</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span> <span class="p">:</span><span class="mo">05</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">hello</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="sr">/[A-Z]\w+/</span><span class="p">,</span> <span class="o">&amp;</span><span class="ss">:downcase</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="o">[</span><span class="s2">&quot;hello&quot;</span><span class="o">]</span>
</code></pre></div>
 <a class="read-more" href="/blog/ruby/benchmark/enumerator-grep-vs-enumerator-select.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/350875eb8fce8553e12040c5a1f5d5d0?s=50" alt="Mauro Otonelli" nopin="nopin" />
  
  <a href="/blog/authors/mauro-oto"
     title="Articles by Mauro Otonelli">
     Mauro Otonelli
  </a>


 
  on
    
      <a href="/blog/tags/ruby"
         title="Articles about Ruby">Ruby</a>,
      <a href="/blog/tags/benchmark"
         title="Articles about Benchmark">Benchmark</a>



<time class="post-date" datetime="2015-04-09">
  09 Apr 2015
</time>

    </footer>
</article>


    

      <article class="post">
    <header class="post-header">
        <h2 class="post-title"><a href="/blog/git/github/4-useful-github-tricks.html">4 Useful Github tricks which should be more popular</a></h2>
    </header>
    <section class="post-excerpt">
        <p>If you are using git in 2015, you are probably also using <a href="http://www.github.com">Github</a>, unless you&#39;re self-hosting or still betting on <a href="http://www.bitbucket.com">Bitbucket</a>.</p>

<p>Below are some cool, useful tricks you can use on Github which can probably make your life easier:</p>

<h2>T</h2>

<p>This is probably the most-well known and most used. By hitting the T key while browsing a repository, the file finder comes up, which lets you type in any file and it will search for that filename in the repository.</p>

<p>You can also navigate using the arrow keys, and access the file by hitting Enter.</p>

<h2>.diff / .patch</h2>

<p>By appending .diff to any diff URL on Github, you&#39;ll be able to see the plain-text version of it, as if looking at output from git.</p>

<h2>?w=1</h2>

<p>A not-so-well-known tip is appending ?w=1 to a diff URL to omit whitespaces from a diff.</p>

<p><a href="https://github.com/ombulabs/setup/commit/7c824aaca37a401bdd6d0f8acd1b11f510648bb4">Example diff on ombulabs/setup</a> vs <a href="https://github.com/ombulabs/setup/commit/7c824aaca37a401bdd6d0f8acd1b11f510648bb4?w=1">Example diff on ombulabs/setup with w=1</a></p>

<p>Probably not the best example but useful to remember for longer diffs.</p>

<h2>.keys</h2>

<p>You can get anyone&#39;s public keys by appending .keys to their Github username. For instance, to get my public keys: <a href="https://github.com/mauro-oto.keys">mauro-oto</a></p>

<p>For great git-specific tips, try <a href="http://mislav.uniqpath.com/2010/07/git-tips/">here</a> or <a href="http://gitready.com/">here</a>.</p>
 <a class="read-more" href="/blog/git/github/4-useful-github-tricks.html">Read more &raquo;</a>
    </section>
    <footer class="post-meta">
      


  
    <img class="author-thumb" src="http://2.gravatar.com/avatar/350875eb8fce8553e12040c5a1f5d5d0?s=50" alt="Mauro Otonelli" nopin="nopin" />
  
  <a href="/blog/authors/mauro-oto"
     title="Articles by Mauro Otonelli">
     Mauro Otonelli
  </a>


 
  on
    
      <a href="/blog/tags/git"
         title="Articles about Git">Git</a>,
      <a href="/blog/tags/github"
         title="Articles about Github">Github</a>



<time class="post-date" datetime="2015-01-19">
  19 Jan 2015
</time>

    </footer>
</article>


    

    <nav class="pagination" role="pagination">
    
    <span class="page-number"> Page 1 of 1 </span>
     
</nav>

</main>

    <footer class="site-footer clearfix">
      <section class="copyright">
        <figure>
          <img src="/blog/assets/images/creative-commons.png"
               alt="Creative Commons Attribution-NonCommercial">
          <figcaption>
            <a href="http://creativecommons.org/licenses/by-nc/3.0/"
               target="_blank"
               title="Creative Commons Attribution-NonCommercial">Creative Commons Attribution-NonCommercial</a>
          </figcaption>
        </figure>
      </section>
      <section class="poweredby">Made with love using Jekyll and
        <a href="http://github.com/rosario/kasper">Kasper theme</a>
      </section>
    </footer>

    <script type="text/javascript" src="/blog/assets/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/blog/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/blog/assets/js/index.js"></script>

    <!-- Google Analytics Tracking code -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-58792073-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</body>
</html>
